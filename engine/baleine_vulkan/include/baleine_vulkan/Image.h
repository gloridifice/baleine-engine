#pragma once

#include <vulkan/vulkan.h>

#include "baleine_type/memory.h"
#include "baleine_type/primitive.h"
#include "macros/bitmask.h"
#include "vk_mem_alloc.h"

namespace balkan {
enum class ImageLayout : u32 {
    Undefined = 0,
    General = 1,
    ColorAttachmentOptimal = 2,
    DepthStencilAttachmentOptimal = 3,
    DepthStencilReadOnlyOptimal = 4,
    ShaderReadOnlyOptimal = 5,
    TransferSrcOptimal = 6,
    TransferDstOptimal = 7,
    Preinitialized = 8,
    DepthReadOnlyStencilAttachmentOptimal = 1000117000,
    DepthAttachmentStencilReadOnlyOptimal = 1000117001,
    DepthAttachmentOptimal = 1000241000,
    DepthReadOnlyOptimal = 1000241001,
    StencilAttachmentOptimal = 1000241002,
    StencilReadOnlyOptimal = 1000241003,
    ReadOnlyOptimal = 1000314000,
    AttachmentOptimal = 1000314001,
    RenderingLocalRead = 1000232000,
    PresentSrcKHR = 1000001002,
    VideoDecodeDstKHR = 1000024000,
    VideoDecodeSrcKHR = 1000024001,
    VideoDecodeDpbKHR = 1000024002,
    SharedPresentKHR = 1000111000,
    FragmentDensityMapOptimalEXT = 1000218000,
    FragmentShadingRateAttachmentOptimalKHR = 1000164003,
    VideoEncodeDstKHR = 1000299000,
    VideoEncodeSrcKHR = 1000299001,
    VideoEncodeDpbKHR = 1000299002,
    AttachmentFeedbackLoopOptimalEXT = 1000339000,
    VideoEncodeQuantizationMapKHR = 1000553000,
    DepthReadOnlyStencilAttachmentOptimalKHR =
        DepthReadOnlyStencilAttachmentOptimal,
    DepthAttachmentStencilReadOnlyOptimalKHR =
        DepthAttachmentStencilReadOnlyOptimal,
    ShadingRateOptimalNV = FragmentShadingRateAttachmentOptimalKHR,
    RenderingLocalReadKHR = RenderingLocalRead,
    DepthAttachmentOptimalKHR = DepthAttachmentOptimal,
    DepthReadOnlyOptimalKHR = DepthReadOnlyOptimal,
    StencilAttachmentOptimalKHR = StencilAttachmentOptimal,
    StencilReadOnlyOptimalKHR = StencilReadOnlyOptimal,
    ReadOnlyOptimalKHR = ReadOnlyOptimal,
    AttachmentOptimalKHR = AttachmentOptimal,
    MaxEnum = 0x7FFFFFFF
};

enum class ImageFormat : u32 {
    Undefined = VK_FORMAT_UNDEFINED,
    R4G4UnormPack8 = VK_FORMAT_R4G4_UNORM_PACK8,
    R4G4B4A4UnormPack16 = VK_FORMAT_R4G4B4A4_UNORM_PACK16,
    B4G4R4A4UnormPack16 = VK_FORMAT_B4G4R4A4_UNORM_PACK16,
    R5G6B5UnormPack16 = VK_FORMAT_R5G6B5_UNORM_PACK16,
    B5G6R5UnormPack16 = VK_FORMAT_B5G6R5_UNORM_PACK16,
    R5G5B5A1UnormPack16 = VK_FORMAT_R5G5B5A1_UNORM_PACK16,
    B5G5R5A1UnormPack16 = VK_FORMAT_B5G5R5A1_UNORM_PACK16,
    A1R5G5B5UnormPack16 = VK_FORMAT_A1R5G5B5_UNORM_PACK16,
    R8Unorm = VK_FORMAT_R8_UNORM,
    R8Snorm = VK_FORMAT_R8_SNORM,
    R8Uscaled = VK_FORMAT_R8_USCALED,
    R8Sscaled = VK_FORMAT_R8_SSCALED,
    R8Uint = VK_FORMAT_R8_UINT,
    R8Sint = VK_FORMAT_R8_SINT,
    R8Srgb = VK_FORMAT_R8_SRGB,
    R8G8Unorm = VK_FORMAT_R8G8_UNORM,
    R8G8Snorm = VK_FORMAT_R8G8_SNORM,
    R8G8Uscaled = VK_FORMAT_R8G8_USCALED,
    R8G8Sscaled = VK_FORMAT_R8G8_SSCALED,
    R8G8Uint = VK_FORMAT_R8G8_UINT,
    R8G8Sint = VK_FORMAT_R8G8_SINT,
    R8G8Srgb = VK_FORMAT_R8G8_SRGB,
    R8G8B8Unorm = VK_FORMAT_R8G8B8_UNORM,
    R8G8B8Snorm = VK_FORMAT_R8G8B8_SNORM,
    R8G8B8Uscaled = VK_FORMAT_R8G8B8_USCALED,
    R8G8B8Sscaled = VK_FORMAT_R8G8B8_SSCALED,
    R8G8B8Uint = VK_FORMAT_R8G8B8_UINT,
    R8G8B8Sint = VK_FORMAT_R8G8B8_SINT,
    R8G8B8Srgb = VK_FORMAT_R8G8B8_SRGB,
    B8G8R8Unorm = VK_FORMAT_B8G8R8_UNORM,
    B8G8R8Snorm = VK_FORMAT_B8G8R8_SNORM,
    B8G8R8Uscaled = VK_FORMAT_B8G8R8_USCALED,
    B8G8R8Sscaled = VK_FORMAT_B8G8R8_SSCALED,
    B8G8R8Uint = VK_FORMAT_B8G8R8_UINT,
    B8G8R8Sint = VK_FORMAT_B8G8R8_SINT,
    B8G8R8Srgb = VK_FORMAT_B8G8R8_SRGB,
    R8G8B8A8Unorm = VK_FORMAT_R8G8B8A8_UNORM,
    R8G8B8A8Snorm = VK_FORMAT_R8G8B8A8_SNORM,
    R8G8B8A8Uscaled = VK_FORMAT_R8G8B8A8_USCALED,
    R8G8B8A8Sscaled = VK_FORMAT_R8G8B8A8_SSCALED,
    R8G8B8A8Uint = VK_FORMAT_R8G8B8A8_UINT,
    R8G8B8A8Sint = VK_FORMAT_R8G8B8A8_SINT,
    R8G8B8A8Srgb = VK_FORMAT_R8G8B8A8_SRGB,
    B8G8R8A8Unorm = VK_FORMAT_B8G8R8A8_UNORM,
    B8G8R8A8Snorm = VK_FORMAT_B8G8R8A8_SNORM,
    B8G8R8A8Uscaled = VK_FORMAT_B8G8R8A8_USCALED,
    B8G8R8A8Sscaled = VK_FORMAT_B8G8R8A8_SSCALED,
    B8G8R8A8Uint = VK_FORMAT_B8G8R8A8_UINT,
    B8G8R8A8Sint = VK_FORMAT_B8G8R8A8_SINT,
    B8G8R8A8Srgb = VK_FORMAT_B8G8R8A8_SRGB,
    A8B8G8R8UnormPack32 = VK_FORMAT_A8B8G8R8_UNORM_PACK32,
    A8B8G8R8SnormPack32 = VK_FORMAT_A8B8G8R8_SNORM_PACK32,
    A8B8G8R8UscaledPack32 = VK_FORMAT_A8B8G8R8_USCALED_PACK32,
    A8B8G8R8SscaledPack32 = VK_FORMAT_A8B8G8R8_SSCALED_PACK32,
    A8B8G8R8UintPack32 = VK_FORMAT_A8B8G8R8_UINT_PACK32,
    A8B8G8R8SintPack32 = VK_FORMAT_A8B8G8R8_SINT_PACK32,
    A8B8G8R8SrgbPack32 = VK_FORMAT_A8B8G8R8_SRGB_PACK32,
    A2R10G10B10UnormPack32 = VK_FORMAT_A2R10G10B10_UNORM_PACK32,
    A2R10G10B10SnormPack32 = VK_FORMAT_A2R10G10B10_SNORM_PACK32,
    A2R10G10B10UscaledPack32 = VK_FORMAT_A2R10G10B10_USCALED_PACK32,
    A2R10G10B10SscaledPack32 = VK_FORMAT_A2R10G10B10_SSCALED_PACK32,
    A2R10G10B10UintPack32 = VK_FORMAT_A2R10G10B10_UINT_PACK32,
    A2R10G10B10SintPack32 = VK_FORMAT_A2R10G10B10_SINT_PACK32,
    A2B10G10R10UnormPack32 = VK_FORMAT_A2B10G10R10_UNORM_PACK32,
    A2B10G10R10SnormPack32 = VK_FORMAT_A2B10G10R10_SNORM_PACK32,
    A2B10G10R10UscaledPack32 = VK_FORMAT_A2B10G10R10_USCALED_PACK32,
    A2B10G10R10SscaledPack32 = VK_FORMAT_A2B10G10R10_SSCALED_PACK32,
    A2B10G10R10UintPack32 = VK_FORMAT_A2B10G10R10_UINT_PACK32,
    A2B10G10R10SintPack32 = VK_FORMAT_A2B10G10R10_SINT_PACK32,
    R16Unorm = VK_FORMAT_R16_UNORM,
    R16Snorm = VK_FORMAT_R16_SNORM,
    R16Uscaled = VK_FORMAT_R16_USCALED,
    R16Sscaled = VK_FORMAT_R16_SSCALED,
    R16Uint = VK_FORMAT_R16_UINT,
    R16Sint = VK_FORMAT_R16_SINT,
    R16Sfloat = VK_FORMAT_R16_SFLOAT,
    R16G16Unorm = VK_FORMAT_R16G16_UNORM,
    R16G16Snorm = VK_FORMAT_R16G16_SNORM,
    R16G16Uscaled = VK_FORMAT_R16G16_USCALED,
    R16G16Sscaled = VK_FORMAT_R16G16_SSCALED,
    R16G16Uint = VK_FORMAT_R16G16_UINT,
    R16G16Sint = VK_FORMAT_R16G16_SINT,
    R16G16Sfloat = VK_FORMAT_R16G16_SFLOAT,
    R16G16B16Unorm = VK_FORMAT_R16G16B16_UNORM,
    R16G16B16Snorm = VK_FORMAT_R16G16B16_SNORM,
    R16G16B16Uscaled = VK_FORMAT_R16G16B16_USCALED,
    R16G16B16Sscaled = VK_FORMAT_R16G16B16_SSCALED,
    R16G16B16Uint = VK_FORMAT_R16G16B16_UINT,
    R16G16B16Sint = VK_FORMAT_R16G16B16_SINT,
    R16G16B16Sfloat = VK_FORMAT_R16G16B16_SFLOAT,
    R16G16B16A16Unorm = VK_FORMAT_R16G16B16A16_UNORM,
    R16G16B16A16Snorm = VK_FORMAT_R16G16B16A16_SNORM,
    R16G16B16A16Uscaled = VK_FORMAT_R16G16B16A16_USCALED,
    R16G16B16A16Sscaled = VK_FORMAT_R16G16B16A16_SSCALED,
    R16G16B16A16Uint = VK_FORMAT_R16G16B16A16_UINT,
    R16G16B16A16Sint = VK_FORMAT_R16G16B16A16_SINT,
    R16G16B16A16Sfloat = VK_FORMAT_R16G16B16A16_SFLOAT,
    R32Uint = VK_FORMAT_R32_UINT,
    R32Sint = VK_FORMAT_R32_SINT,
    R32Sfloat = VK_FORMAT_R32_SFLOAT,
    R32G32Uint = VK_FORMAT_R32G32_UINT,
    R32G32Sint = VK_FORMAT_R32G32_SINT,
    R32G32Sfloat = VK_FORMAT_R32G32_SFLOAT,
    R32G32B32Uint = VK_FORMAT_R32G32B32_UINT,
    R32G32B32Sint = VK_FORMAT_R32G32B32_SINT,
    R32G32B32Sfloat = VK_FORMAT_R32G32B32_SFLOAT,
    R32G32B32A32Uint = VK_FORMAT_R32G32B32A32_UINT,
    R32G32B32A32Sint = VK_FORMAT_R32G32B32A32_SINT,
    R32G32B32A32Sfloat = VK_FORMAT_R32G32B32A32_SFLOAT,
    R64Uint = VK_FORMAT_R64_UINT,
    R64Sint = VK_FORMAT_R64_SINT,
    R64Sfloat = VK_FORMAT_R64_SFLOAT,
    R64G64Uint = VK_FORMAT_R64G64_UINT,
    R64G64Sint = VK_FORMAT_R64G64_SINT,
    R64G64Sfloat = VK_FORMAT_R64G64_SFLOAT,
    R64G64B64Uint = VK_FORMAT_R64G64B64_UINT,
    R64G64B64Sint = VK_FORMAT_R64G64B64_SINT,
    R64G64B64Sfloat = VK_FORMAT_R64G64B64_SFLOAT,
    R64G64B64A64Uint = VK_FORMAT_R64G64B64A64_UINT,
    R64G64B64A64Sint = VK_FORMAT_R64G64B64A64_SINT,
    R64G64B64A64Sfloat = VK_FORMAT_R64G64B64A64_SFLOAT,
    B10G11R11UfloatPack32 = VK_FORMAT_B10G11R11_UFLOAT_PACK32,
    E5B9G9R9UfloatPack32 = VK_FORMAT_E5B9G9R9_UFLOAT_PACK32,
    D16Unorm = VK_FORMAT_D16_UNORM,
    X8D24UnormPack32 = VK_FORMAT_X8_D24_UNORM_PACK32,
    D32Sfloat = VK_FORMAT_D32_SFLOAT,
    S8Uint = VK_FORMAT_S8_UINT,
    D16UnormS8Uint = VK_FORMAT_D16_UNORM_S8_UINT,
    D24UnormS8Uint = VK_FORMAT_D24_UNORM_S8_UINT,
    D32SfloatS8Uint = VK_FORMAT_D32_SFLOAT_S8_UINT,
    Bc1RgbUnormBlock = VK_FORMAT_BC1_RGB_UNORM_BLOCK,
    Bc1RgbSrgbBlock = VK_FORMAT_BC1_RGB_SRGB_BLOCK,
    Bc1RgbaUnormBlock = VK_FORMAT_BC1_RGBA_UNORM_BLOCK,
    Bc1RgbaSrgbBlock = VK_FORMAT_BC1_RGBA_SRGB_BLOCK,
    Bc2UnormBlock = VK_FORMAT_BC2_UNORM_BLOCK,
    Bc2SrgbBlock = VK_FORMAT_BC2_SRGB_BLOCK,
    Bc3UnormBlock = VK_FORMAT_BC3_UNORM_BLOCK,
    Bc3SrgbBlock = VK_FORMAT_BC3_SRGB_BLOCK,
    Bc4UnormBlock = VK_FORMAT_BC4_UNORM_BLOCK,
    Bc4SnormBlock = VK_FORMAT_BC4_SNORM_BLOCK,
    Bc5UnormBlock = VK_FORMAT_BC5_UNORM_BLOCK,
    Bc5SnormBlock = VK_FORMAT_BC5_SNORM_BLOCK,
    Bc6HUfloatBlock = VK_FORMAT_BC6H_UFLOAT_BLOCK,
    Bc6HSfloatBlock = VK_FORMAT_BC6H_SFLOAT_BLOCK,
    Bc7UnormBlock = VK_FORMAT_BC7_UNORM_BLOCK,
    Bc7SrgbBlock = VK_FORMAT_BC7_SRGB_BLOCK,
    Etc2R8G8B8UnormBlock = VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK,
    Etc2R8G8B8SrgbBlock = VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK,
    Etc2R8G8B8A1UnormBlock = VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK,
    Etc2R8G8B8A1SrgbBlock = VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK,
    Etc2R8G8B8A8UnormBlock = VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK,
    Etc2R8G8B8A8SrgbBlock = VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK,
    EacR11UnormBlock = VK_FORMAT_EAC_R11_UNORM_BLOCK,
    EacR11SnormBlock = VK_FORMAT_EAC_R11_SNORM_BLOCK,
    EacR11G11UnormBlock = VK_FORMAT_EAC_R11G11_UNORM_BLOCK,
    EacR11G11SnormBlock = VK_FORMAT_EAC_R11G11_SNORM_BLOCK,
    Astc4x4UnormBlock = VK_FORMAT_ASTC_4x4_UNORM_BLOCK,
    Astc4x4SrgbBlock = VK_FORMAT_ASTC_4x4_SRGB_BLOCK,
    Astc5x4UnormBlock = VK_FORMAT_ASTC_5x4_UNORM_BLOCK,
    Astc5x4SrgbBlock = VK_FORMAT_ASTC_5x4_SRGB_BLOCK,
    Astc5x5UnormBlock = VK_FORMAT_ASTC_5x5_UNORM_BLOCK,
    Astc5x5SrgbBlock = VK_FORMAT_ASTC_5x5_SRGB_BLOCK,
    Astc6x5UnormBlock = VK_FORMAT_ASTC_6x5_UNORM_BLOCK,
    Astc6x5SrgbBlock = VK_FORMAT_ASTC_6x5_SRGB_BLOCK,
    Astc6x6UnormBlock = VK_FORMAT_ASTC_6x6_UNORM_BLOCK,
    Astc6x6SrgbBlock = VK_FORMAT_ASTC_6x6_SRGB_BLOCK,
    Astc8x5UnormBlock = VK_FORMAT_ASTC_8x5_UNORM_BLOCK,
    Astc8x5SrgbBlock = VK_FORMAT_ASTC_8x5_SRGB_BLOCK,
    Astc8x6UnormBlock = VK_FORMAT_ASTC_8x6_UNORM_BLOCK,
    Astc8x6SrgbBlock = VK_FORMAT_ASTC_8x6_SRGB_BLOCK,
    Astc8x8UnormBlock = VK_FORMAT_ASTC_8x8_UNORM_BLOCK,
    Astc8x8SrgbBlock = VK_FORMAT_ASTC_8x8_SRGB_BLOCK,
    Astc10x5UnormBlock = VK_FORMAT_ASTC_10x5_UNORM_BLOCK,
    Astc10x5SrgbBlock = VK_FORMAT_ASTC_10x5_SRGB_BLOCK,
    Astc10x6UnormBlock = VK_FORMAT_ASTC_10x6_UNORM_BLOCK,
    Astc10x6SrgbBlock = VK_FORMAT_ASTC_10x6_SRGB_BLOCK,
    Astc10x8UnormBlock = VK_FORMAT_ASTC_10x8_UNORM_BLOCK,
    Astc10x8SrgbBlock = VK_FORMAT_ASTC_10x8_SRGB_BLOCK,
    Astc10x10UnormBlock = VK_FORMAT_ASTC_10x10_UNORM_BLOCK,
    Astc10x10SrgbBlock = VK_FORMAT_ASTC_10x10_SRGB_BLOCK,
    Astc12x10UnormBlock = VK_FORMAT_ASTC_12x10_UNORM_BLOCK,
    Astc12x10SrgbBlock = VK_FORMAT_ASTC_12x10_SRGB_BLOCK,
    Astc12x12UnormBlock = VK_FORMAT_ASTC_12x12_UNORM_BLOCK,
    Astc12x12SrgbBlock = VK_FORMAT_ASTC_12x12_SRGB_BLOCK,
    G8B8G8R8422Unorm = VK_FORMAT_G8B8G8R8_422_UNORM,
    B8G8R8G8422Unorm = VK_FORMAT_B8G8R8G8_422_UNORM,
    G8B8R83Plane420Unorm = VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM,
    G8B8R82Plane420Unorm = VK_FORMAT_G8_B8R8_2PLANE_420_UNORM,
    G8B8R83Plane422Unorm = VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM,
    G8B8R82Plane422Unorm = VK_FORMAT_G8_B8R8_2PLANE_422_UNORM,
    G8B8R83Plane444Unorm = VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM,
    R10X6UnormPack16 = VK_FORMAT_R10X6_UNORM_PACK16,
    R10X6G10X6Unorm2Pack16 = VK_FORMAT_R10X6G10X6_UNORM_2PACK16,
    R10X6G10X6B10X6A10X6Unorm4Pack16 =
        VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16,
    G10X6B10X6G10X6R10X6422Unorm4Pack16 =
        VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16,
    B10X6G10X6R10X6G10X6422Unorm4Pack16 =
        VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16,
    G10X6B10X6R10X63Plane420Unorm3Pack16 =
        VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16,
    G10X6B10X6R10X62Plane420Unorm3Pack16 =
        VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16,
    G10X6B10X6R10X63Plane422Unorm3Pack16 =
        VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16,
    G10X6B10X6R10X62Plane422Unorm3Pack16 =
        VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16,
    G10X6B10X6R10X63Plane444Unorm3Pack16 =
        VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16,
    R12X4UnormPack16 = VK_FORMAT_R12X4_UNORM_PACK16,
    R12X4G12X4Unorm2Pack16 = VK_FORMAT_R12X4G12X4_UNORM_2PACK16,
    R12X4G12X4B12X4A12X4Unorm4Pack16 =
        VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16,
    G12X4B12X4G12X4R12X4422Unorm4Pack16 =
        VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16,
    B12X4G12X4R12X4G12X4422Unorm4Pack16 =
        VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16,
    G12X4B12X4R12X43Plane420Unorm3Pack16 =
        VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16,
    G12X4B12X4R12X42Plane420Unorm3Pack16 =
        VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16,
    G12X4B12X4R12X43Plane422Unorm3Pack16 =
        VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16,
    G12X4B12X4R12X42Plane422Unorm3Pack16 =
        VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16,
    G12X4B12X4R12X43Plane444Unorm3Pack16 =
        VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16,
    G16B16G16R16422Unorm = VK_FORMAT_G16B16G16R16_422_UNORM,
    B16G16R16G16422Unorm = VK_FORMAT_B16G16R16G16_422_UNORM,
    G16B16R163Plane420Unorm = VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM,
    G16B16R162Plane420Unorm = VK_FORMAT_G16_B16R16_2PLANE_420_UNORM,
    G16B16R163Plane422Unorm = VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM,
    G16B16R162Plane422Unorm = VK_FORMAT_G16_B16R16_2PLANE_422_UNORM,
    G16B16R163Plane444Unorm = VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM,
    G8B8R82Plane444Unorm = VK_FORMAT_G8_B8R8_2PLANE_444_UNORM,
    G10X6B10X6R10X62Plane444Unorm3Pack16 =
        VK_FORMAT_G10X6_B10X6R10X6_2PLANE_444_UNORM_3PACK16,
    G12X4B12X4R12X42Plane444Unorm3Pack16 =
        VK_FORMAT_G12X4_B12X4R12X4_2PLANE_444_UNORM_3PACK16,
    G16B16R162Plane444Unorm = VK_FORMAT_G16_B16R16_2PLANE_444_UNORM,
    A4R4G4B4UnormPack16 = VK_FORMAT_A4R4G4B4_UNORM_PACK16,
    A4B4G4R4UnormPack16 = VK_FORMAT_A4B4G4R4_UNORM_PACK16,
    Astc4x4SfloatBlock = VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK,
    Astc5x4SfloatBlock = VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK,
    Astc5x5SfloatBlock = VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK,
    Astc6x5SfloatBlock = VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK,
    Astc6x6SfloatBlock = VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK,
    Astc8x5SfloatBlock = VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK,
    Astc8x6SfloatBlock = VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK,
    Astc8x8SfloatBlock = VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK,
    Astc10x5SfloatBlock = VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK,
    Astc10x6SfloatBlock = VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK,
    Astc10x8SfloatBlock = VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK,
    Astc10x10SfloatBlock = VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK,
    Astc12x10SfloatBlock = VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK,
    Astc12x12SfloatBlock = VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK,
    Pvrtc12BppUnormBlockImg = VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG,
    Pvrtc14BppUnormBlockImg = VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG,
    Pvrtc22BppUnormBlockImg = VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG,
    Pvrtc24BppUnormBlockImg = VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG,
    Pvrtc12BppSrgbBlockImg = VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG,
    Pvrtc14BppSrgbBlockImg = VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG,
    Pvrtc22BppSrgbBlockImg = VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG,
    Pvrtc24BppSrgbBlockImg = VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG,
    R16G16Sfixed5Nv = VK_FORMAT_R16G16_SFIXED5_NV,
    A1B5G5R5UnormPack16 = VK_FORMAT_A1B5G5R5_UNORM_PACK16,
    A8Unorm = VK_FORMAT_A8_UNORM,
    // 兼容别名
    Astc4x4SfloatBlockExt = VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT,
    Astc5x4SfloatBlockExt = VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT,
    Astc5x5SfloatBlockExt = VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT,
    Astc6x5SfloatBlockExt = VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT,
    Astc6x6SfloatBlockExt = VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT,
    Astc8x5SfloatBlockExt = VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT,
    Astc8x6SfloatBlockExt = VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT,
    Astc8x8SfloatBlockExt = VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT,
    Astc10x5SfloatBlockExt = VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT,
    Astc10x6SfloatBlockExt = VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT,
    Astc10x8SfloatBlockExt = VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT,
    Astc10x10SfloatBlockExt = VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT,
    Astc12x10SfloatBlockExt = VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT,
    Astc12x12SfloatBlockExt = VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT,
    G8B8G8R8422UnormKhr = VK_FORMAT_G8B8G8R8_422_UNORM_KHR,
    B8G8R8G8422UnormKhr = VK_FORMAT_B8G8R8G8_422_UNORM_KHR,
    G8B8R83Plane420UnormKhr = VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR,
    G8B8R82Plane420UnormKhr = VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR,
    G8B8R83Plane422UnormKhr = VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR,
    G8B8R82Plane422UnormKhr = VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR,
    G8B8R83Plane444UnormKhr = VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR,
    R10X6UnormPack16Khr = VK_FORMAT_R10X6_UNORM_PACK16_KHR,
    R10X6G10X6Unorm2Pack16Khr = VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR,
    R10X6G10X6B10X6A10X6Unorm4Pack16Khr =
        VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR,
    G10X6B10X6G10X6R10X6422Unorm4Pack16Khr =
        VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR,
    B10X6G10X6R10X6G10X6422Unorm4Pack16Khr =
        VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR,
    G10X6B10X6R10X63Plane420Unorm3Pack16Khr =
        VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR,
    G10X6B10X6R10X62Plane420Unorm3Pack16Khr =
        VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR,
    G10X6B10X6R10X63Plane422Unorm3Pack16Khr =
        VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR,
    G10X6B10X6R10X62Plane422Unorm3Pack16Khr =
        VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR,
    G10X6B10X6R10X63Plane444Unorm3Pack16Khr =
        VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR,
    R12X4UnormPack16Khr = VK_FORMAT_R12X4_UNORM_PACK16_KHR,
    R12X4G12X4Unorm2Pack16Khr = VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR,
    R12X4G12X4B12X4A12X4Unorm4Pack16Khr =
        VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR,
    G12X4B12X4G12X4R12X4422Unorm4Pack16Khr =
        VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR,
    B12X4G12X4R12X4G12X4422Unorm4Pack16Khr =
        VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR,
    G12X4B12X4R12X43Plane420Unorm3Pack16Khr =
        VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR,
    G12X4B12X4R12X42Plane420Unorm3Pack16Khr =
        VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR,
    G12X4B12X4R12X43Plane422Unorm3Pack16Khr =
        VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR,
    G12X4B12X4R12X42Plane422Unorm3Pack16Khr =
        VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR,
    G12X4B12X4R12X43Plane444Unorm3Pack16Khr =
        VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR,
    G16B16G16R16422UnormKhr = VK_FORMAT_G16B16G16R16_422_UNORM_KHR,
    B16G16R16G16422UnormKhr = VK_FORMAT_B16G16R16G16_422_UNORM_KHR,
    G16B16R163Plane420UnormKhr = VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR,
    G16B16R162Plane420UnormKhr = VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR,
    G16B16R163Plane422UnormKhr = VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR,
    G16B16R162Plane422UnormKhr = VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR,
    G16B16R163Plane444UnormKhr = VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR,
    G8B8R82Plane444UnormExt = VK_FORMAT_G8_B8R8_2PLANE_444_UNORM_EXT,
    G10X6B10X6R10X62Plane444Unorm3Pack16Ext =
        VK_FORMAT_G10X6_B10X6R10X6_2PLANE_444_UNORM_3PACK16_EXT,
    G12X4B12X4R12X42Plane444Unorm3Pack16Ext =
        VK_FORMAT_G12X4_B12X4R12X4_2PLANE_444_UNORM_3PACK16_EXT,
    G16B16R162Plane444UnormExt = VK_FORMAT_G16_B16R16_2PLANE_444_UNORM_EXT,
    A4R4G4B4UnormPack16Ext = VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT,
    A4B4G4R4UnormPack16Ext = VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT,
    A1B5G5R5UnormPack16Khr = VK_FORMAT_A1B5G5R5_UNORM_PACK16_KHR,
    A8UnormKhr = VK_FORMAT_A8_UNORM_KHR,
    MaxEnum = VK_FORMAT_MAX_ENUM
};

enum class ImageUsage : u32 {
    TransferSrc = VK_IMAGE_USAGE_TRANSFER_SRC_BIT,
    TransferDst = VK_IMAGE_USAGE_TRANSFER_DST_BIT,
    Sampled = VK_IMAGE_USAGE_SAMPLED_BIT,
    Storage = VK_IMAGE_USAGE_STORAGE_BIT,
    ColorAttachment = VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT,
    DepthStencilAttachment = VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT,
    TransientAttachment = VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT,
    InputAttachment = VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT,
    HostTransfer = VK_IMAGE_USAGE_HOST_TRANSFER_BIT,
    VideoDecodeDstKhr = VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR,
    VideoDecodeSrcKhr = VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR,
    VideoDecodeDpbKhr = VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR,
    FragmentDensityMapExt = VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT,
    FragmentShadingRateAttachmentKhr =
        VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR,
    VideoEncodeDstKhr = VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR,
    VideoEncodeSrcKhr = VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR,
    VideoEncodeDpbKhr = VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR,
    AttachmentFeedbackLoopExt = VK_IMAGE_USAGE_ATTACHMENT_FEEDBACK_LOOP_BIT_EXT,
    InvocationMaskHuawei = VK_IMAGE_USAGE_INVOCATION_MASK_BIT_HUAWEI,
    SampleWeightQcom = VK_IMAGE_USAGE_SAMPLE_WEIGHT_BIT_QCOM,
    SampleBlockMatchQcom = VK_IMAGE_USAGE_SAMPLE_BLOCK_MATCH_BIT_QCOM,
    TileMemoryQcom = VK_IMAGE_USAGE_TILE_MEMORY_QCOM,
    VideoEncodeQuantizationDeltaMapKhr =
        VK_IMAGE_USAGE_VIDEO_ENCODE_QUANTIZATION_DELTA_MAP_BIT_KHR,
    VideoEncodeEmphasisMapKhr =
        VK_IMAGE_USAGE_VIDEO_ENCODE_EMPHASIS_MAP_BIT_KHR,

    // 兼容别名
    ShadingRateImageNv = VK_IMAGE_USAGE_SHADING_RATE_IMAGE_BIT_NV,
    HostTransferExt = VK_IMAGE_USAGE_HOST_TRANSFER_BIT_EXT,
    FlagBitsMaxEnum = VK_IMAGE_USAGE_FLAG_BITS_MAX_ENUM
};

enum class ImageTiling : u32 {
    Optimal = VK_IMAGE_TILING_OPTIMAL,
    Linear = VK_IMAGE_TILING_LINEAR,
    DrmFormatModifierExt = VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT,
    MaxEnum = VK_IMAGE_TILING_MAX_ENUM
};

enum class ImageType : u32 {
    D1 = VK_IMAGE_TYPE_1D,
    D2 = VK_IMAGE_TYPE_2D,
    D3 = VK_IMAGE_TYPE_3D,
    MaxEnum = VK_IMAGE_TYPE_MAX_ENUM
};

ENABLE_BITMASK_OPERATORS(ImageUsage);

class ImageView;
class Device;

class Image: EnableSharedFromThis<Image> {
  public:
    VkImage image;
    ImageFormat format;
    VkExtent3D extent;

    Shared<Device> device;

    VmaAllocator allocator;
    VmaAllocation allocation;

    ImageLayout layout = ImageLayout::Undefined;

    explicit Image(
        VkImage image,
        ImageFormat format,
        VkExtent3D extent,
        Shared<Device>&& device,
        VmaAllocation allocation = nullptr,
        VmaAllocator allocator = nullptr,
        ImageLayout layout = ImageLayout::Undefined
    );

    ~Image();

    auto create_view() -> Shared<ImageView>;
};

class ImageView {
  public:
    VkImageView view;
    Shared<Image> image;

    ImageView(VkImageView view, Shared<Image>&& image);
    ~ImageView();
};
} // namespace balkan
